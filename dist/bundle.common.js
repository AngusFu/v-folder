!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.vFolder=n()}(this,function(){"use strict";function e(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function n(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},t=0;t<10;t++)n["_"+String.fromCharCode(t)]=t;var r=Object.getOwnPropertyNames(n).map(function(e){return n[e]});if("0123456789"!==r.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}function t(e,n){return n={exports:{}},e(n,n.exports),n.exports}var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=n()?Object.assign:function(n,t){for(var i,c,s=arguments,f=e(n),d=1;d<arguments.length;d++){i=Object(s[d]);for(var u in i)o.call(i,u)&&(f[u]=i[u]);if(r){c=r(i);for(var h=0;h<c.length;h++)a.call(i,c[h])&&(f[c[h]]=i[c[h]])}}return f},c=i,s=function(e,n,t,r){void 0===e&&(e={}),void 0===n&&(n={}),void 0===t&&(t="0"),void 0===r&&(r="");var o=c({},n,f),a=o.node,i=o.branch,d=o.leaf,u=o.checked,h=o.open,l=e[a]||"/",p=e[i]||[],v=e[d]||[],b=p.length>0||v.length>0;return p=p.map(function(e,n){return s(e,o,t+"."+n,r+"/"+e.name)}),v=v.map(function(e,n){return{checked:u,name:e,level:t+"."+n,path:r+"/"+e}}),{name:l,level:t,path:r,node:{name:l,open:h,canOpen:b,checked:u,level:t},branches:p,leafs:v}},f={node:"name",branch:"dirs",leaf:"files",open:!1,checked:!1},d={transform:s,defaultConf:f},u=i,h=d.transform,l=d.defaultConf,p=[].push,v=function(){function e(e,n){this.dataStore=this.setStore(e,n)}return e.prototype.setStore=function(e,n){return void 0===e&&(e={}),void 0===n&&(n=l),this.dataStore=h(e,n)},e.prototype.findParentBranch=function(e){void 0===e&&(e="");var n=e.length,t=this.dataStore;if(n<=1)return null;for(var r=e.split(".").slice(1,-1),o=0;t&&(o=r.shift());)t=t.branches[o];return t},e.prototype.findCurrentBranch=function(e){void 0===e&&(e="");for(var n=e.split(".").slice(1),t=0,r=this.dataStore;r&&(t=n.shift());)r=r.branches[t];return r},e.prototype.checkBranchAscendents=function(e,n){var t=!1;if(e){if(n){var r=!e.branches.some(function(e){return!e.node.checked}),o=!e.leafs.some(function(e){return!e.checked});t=r&&o}e.node.checked=t,this.checkBranchAscendents(this.findParentBranch(e.level),t)}},e.prototype.checkBranchDescendents=function(e,n){var t=this;e.node.checked=n,e.leafs.forEach(function(e){return e.checked=n}),e.branches.forEach(function(e){e.node.checked=n,t.checkBranchDescendents(e,n)})},e.prototype.checkNode=function(e){var n=this.findCurrentBranch(e.level),t=!n.node.checked;this.checkBranchDescendents(n,t),this.checkBranchAscendents(this.findParentBranch(n.level),t)},e.prototype.expandNode=function(e){e.open=!e.open},e.prototype.checkLeaf=function(e){var n=this.findParentBranch(e.level),t=!e.checked;e.checked=t,this.checkBranchAscendents(n,t)},e.prototype.replaceBranch=function(e,n,t){void 0===n&&(n="0"),void 0===t&&(t=l);for(var r=n.split(".").slice(1),o=0,a=u({},this.dataStore),i=a,c=r.pop();i&&(o=r.shift());)i=i.branches[o];return i.branches[c]=h(e,t,n),this.dataStore=a},e.prototype.getPathResult=function(e){var n=this;e=e||this.dataStore;var t=[],r=e.node,o=e.branches,a=e.leafs;e.path;return r.checked?t.push(e.path):(a.forEach(function(e){var n=e.checked,r=e.path;n&&t.push(r)}),o.forEach(function(e){p.apply(t,n.getPathResult(e))})),t},e}(),b={methods:{notify:function(e){this.$vemit(e,this.data)}}},m={template:'<li class="v-node" :key="data.level"><i class="fa" :class="[ data.canOpen && data.open ? \'fa-folder-open-o\' : \'fa-folder-o\' ]" @click="notify(\'NODE_OPEN\')"></i> <span @click="notify(\'NODE_CHECK\')"><i class="fa" :class="[ data.checked ? \'fa-check-square-o\' : \'fa-square-o\' ]"></i> {{data.name}}</span></li>',props:{data:{type:Object,require:!0},uid:{type:[Number,String],require:!0}},mixins:[b]},y={template:'<li class="v-leaf" @click="notify(\'LEAF_CHECK\')" :key="data.level"><i class="fa" :class="[ data.checked ? \'fa-check-square-o\' : \'fa-square-o\' ]"></i> {{data.name}}</li>',props:{data:{type:Object,require:!0},uid:{type:[Number,String],require:!0}},mixins:[b]},k={template:'<li :key="node.level" class="v-branch"><ul class="v-branch-body"><v-node :data="node" :uid="uid"></v-node><v-branch v-show="node.open" v-for="branch in branches" :data="branch" :uid="uid"></v-branch><v-leaf v-show="node.open" v-for="leaf in leafs" :data="leaf" :uid="uid"></v-leaf></ul></li>',name:"v-branch",props:{data:{type:Object,require:!0},uid:{type:[Number,String],require:!0}},components:{"v-node":m,"v-leaf":y},computed:{branches:function(){return this.data.branches},leafs:function(){return this.data.leafs},node:function(){return this.data.node}}},g=2333,O={template:'<ul class="v-branch-body"><v-node :data="node" :uid="uid"></v-node><v-branch v-show="node.open" v-for="branch in branches" :data="branch" :uid="uid"></v-branch><v-leaf v-show="node.open" v-for="leaf in leafs" :data="leaf" :uid="uid"></v-leaf></ul>',name:"v-folder",props:{data:Object,conf:Object},components:{"v-node":m,"v-leaf":y,"v-branch":k},data:function(){var e=new v(this.data,this.conf);return{uid:g++,store:e,root:e.dataStore}},computed:{branches:function(){return this.root.branches},leafs:function(){return this.root.leafs},node:function(){return this.root.node}},created:function(){var e=this;this.$von("NODE_OPEN",function(n){e.store.expandNode(n)}),this.$von("NODE_CHECK",function(n){e.store.checkNode(n),e.$vemit("change",e.store.getPathResult())}),this.$von("LEAF_CHECK",function(n){e.store.checkLeaf(n),e.$emit("change",e.store.getPathResult())})},destroyed:function(){this.$voff()}},j="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},w=t(function(e,n){!function(n,t){e.exports=t()}(j,function(){function e(e){var n=e.split("."),t=n.splice(0,2);return t.push(n.join(".")),t}function n(e){return isNaN(Number(e))?e:Number(e)}function t(e){if("string"!=typeof e)throw new TypeError("Invalid argument expected string");if(!r.test(e))throw new Error("Invalid argument not valid semver")}var r=/^v?(?:0|[1-9]\d*)(\.(?:[x*]|0|[1-9]\d*)(\.(?:[x*]|0|[1-9]\d*)(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,o=/-([0-9A-Za-z-.]+)/;return function(r,a){[r,a].forEach(t);for(var i=e(r),c=e(a),s=0;s<3;s++){var f=parseInt(i[s]||0,10),d=parseInt(c[s]||0,10);if(f>d)return 1;if(d>f)return-1}if([i[2],c[2]].every(o.test.bind(o))){var u=o.exec(i[2])[1].split(".").map(n),h=o.exec(c[2])[1].split(".").map(n);for(s=0;s<Math.max(u.length,h.length);s++){if(void 0===u[s]||"string"==typeof h[s]&&"number"==typeof u[s])return-1;if(void 0===h[s]||"string"==typeof u[s]&&"number"==typeof h[s])return 1;if(u[s]>h[s])return 1;if(h[s]>u[s])return-1}}else if([i[2],c[2]].some(o.test.bind(o)))return o.test(i[2])?-1:1;return 0}})}),E=function(){var e=function(e,n){return w(e,n)>=0};if(!e(Vue.version,"2.0.0"))throw"This module can only supports vue@2!"},N=function(){var e=new Vue,n=Vue.prototype;n.$von=function(n,t){var r=this.uid,o=function(e){r===e.uid&&t&&t(e.data)};e.$on("@"+r+":"+n,o)},n.$vonce=function(n,t){var r=this.uid,o=function(e){console.log(e),r===e.uid&&t&&t(e.data)};e.$once("@"+r+":"+n,o)},n.$vemit=function(n,t){var r=this.uid;e.$emit("@"+r+":"+n,{data:t,uid:r})},n.$voff=function(n,t){var r=this.uid;if(n)e.$off("@"+r+":"+n,t);else{r="@"+r+":";var o=(r.length,Object.keys(e._events)),a=o.filter(function(e){return 0===key.indexOf(r)});a.forEach(function(n){e.$off(n,t)})}}};return O.install=function(e){E(e),N(e),e.component(O.name,O)},O});
//# sourceMappingURL=bundle.common.js.map
