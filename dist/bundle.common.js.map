{"version":3,"file":"bundle.common.js","sources":["../node_modules/object-assign/index.js","../src/transform.js","../src/mixin.js","../node_modules/clone/clone.js","../src/store.js","../src/v-node.vue","../src/v-leaf.vue","../src/v-branch.vue","../src/v-tree.vue","../src/index.vue","../node_modules/compare-versions/index.js","../src/install.js","../src/index.js"],"sourcesContent":["/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","import objectAssign from 'object-assign';\n\n/**\n * standardlize a normal tree object\n * \n * @param data   data to be transformed\n * @param conf   contains keys to extract data from `data`\n * @param level  identifier inferring depth\n */\nexport default transform;\n\nfunction transform(data = {}, config, level, path) {\n  let { node, branch, leaf, checked, open } = config;\n  let name = data[node] || '/';\n  let branches = data[branch] || [];\n  let leafs   = data[leaf] || [];\n  let canOpen  = branches.length > 0 || leafs.length > 0;\n\n  path = path || `/${name}`;\n  \n  branches = branches.map((branch, i) => {\n    return transform(branch, config, `${level}.${i}`, `${path}/${branch.name}`);\n  });\n  \n  leafs = leafs.map((leaf, i) => {\n    return {\n      name: leaf,\n      type: 'leaf',\n      checked,\n      level: `${level}.${i}`,\n      path: `${path}/${leaf}`\n    };\n  });\n\n  let status = canOpen ? 'filled' : 'empty';\n\n  return {\n    name,\n    type: 'branch',\n    level,\n    path,\n    node: { name, open, canOpen, checked, level, path, type: 'node', status },\n    branches,\n    leafs,\n  };\n};\n\n// function raw(tree, conf) {\n//   conf = objectAssign({}, conf, defaultConf);\n//   let { node, branch, leaf } = conf;\n//   let ret = {};\n//   ret[node] = tree.name;\n//   ret[branch] = tree.branches.map(b => raw(b, conf));\n//   ret[leaf] = tree.leafs.map(l => l.name);\n//   return ret;\n// }\n\n// transform.raw = raw;\n","export default {\n  methods: {\n    notify(type) {\n      if (process.env.ENV === 'prod') {\n        console.info('[event type]:', type);\n      }\n      this.___vemit(type, this.data);\n    },\n    listen(type, fn) {\n      this.___von(type, e => {\n        fn(e);\n      });\n    }\n  },\n  destroyed() {\n    this.___voff();\n  }\n};\n","var clone = (function() {\n'use strict';\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (parent instanceof nativeMap) {\n      child = new nativeMap();\n    } else if (parent instanceof nativeSet) {\n      child = new nativeSet();\n    } else if (parent instanceof nativePromise) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      child = new Buffer(parent.length);\n      parent.copy(child);\n      return child;\n    } else if (parent instanceof Error) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (parent instanceof nativeMap) {\n      var keyIterator = parent.keys();\n      while(true) {\n        var next = keyIterator.next();\n        if (next.done) {\n          break;\n        }\n        var keyChild = _clone(next.value, depth - 1);\n        var valueChild = _clone(parent.get(next.value), depth - 1);\n        child.set(keyChild, valueChild);\n      }\n    }\n    if (parent instanceof nativeSet) {\n      var iterator = parent.keys();\n      while(true) {\n        var next = iterator.next();\n        if (next.done) {\n          break;\n        }\n        var entryChild = _clone(next.value, depth - 1);\n        child.add(entryChild);\n      }\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n","import objectAssign from 'object-assign';\nimport deepClone from 'clone';\nimport transform from '../src/transform';\n\nconst arrPush = [].push;\nconst noop = _ => _;\nconst defaultConf = {\n  node: 'name',\n  branch: 'dirs',\n  leaf: 'files',\n  open: false,\n  checked: false\n};\n\nexport default class Store {\n  constructor(data, conf) {\n    let path = data.path || data.name;\n    let name = path.split('/').filter(s => !!s).slice(-1)[0] || data.name;\n    data.name = name;\n    this.conf = objectAssign({}, conf, defaultConf);\n    this.dataStore = transform(data, this.conf, '0', path);\n  }\n\n  /**\n   * set data store\n   * @private\n   */\n  replace(newTree) {\n    this.dataStore = newTree;\n  }\n\n  /**\n   * get parent branch by levelId.\n   * result for a leaf is the branch it is on,\n   * for a branch,  result is it's parent branch.\n   * \n   * @private\n   * @param levelId\n   */\n  findParentBranch(levelId = '') {\n    let length = levelId.length;\n    let branch = this.dataStore;\n\n    if (length <= 1) {\n      return null;\n    }\n    \n    let lvs    = levelId.split('.').slice(1, -1);\n    let index  = 0;\n\n    while (branch && (index = lvs.shift())) {\n      branch = branch.branches[index];\n    }\n\n    return branch;\n  }\n\n  /**\n   * get current branch\n   * \n   * @private\n   * @param levelId \n   */\n  findCurrentBranch(levelId = '') {\n    let lvs    = levelId.split('.').slice(1);\n    let index  = 0;\n    let branch = this.dataStore;\n\n    while (branch && (index = lvs.shift())) {\n      branch = branch.branches[index];\n    }\n\n    return branch;\n  }\n\n  /**\n   * check ascendents of certain level rescursively\n   * to see if they should get checked\n   * \n   * @private\n   * @param branch    the descendent branch\n   * @param checked  if the descendent is checked\n   */\n  checkBranchAscendents(branch, checked) {\n    let nextStatus = false;\n\n    if (branch) {\n      if (checked) {\n        let allBranchesChecked = !branch.branches.some(b => !b.node.checked);\n        let allLeavesChecked   = !branch.leafs.some(l => !l.checked);\n        nextStatus = allBranchesChecked && allLeavesChecked;\n      }\n\n      branch.node.checked = nextStatus;\n      this.checkBranchAscendents(this.findParentBranch(branch.level), nextStatus);\n    }\n  }\n\n  /**\n   * check branch children and decendents.\n   * if node is checked, all children are checked too and vice versa.\n   *\n   * @private\n   * @param branch   current descendent branch\n   * @param checked  if the ascendent is checked\n   */\n  checkBranchDescendents(branch, checked) {\n    branch.node.checked = checked;\n    branch.leafs.forEach(l => l.checked = checked);\n    branch.branches.forEach(b => {\n      b.node.checked = checked;\n      this.checkBranchDescendents(b, checked);\n    });\n  }\n\n  /************************************************************************\n   * * * * * * * * * * * * Public Method Below * * * * * * * * * * * * * * \n   ************************************************************************/\n  /**\n   * if one node is checked/unchecked,\n   * we have to check/uncheck all ites descendents,\n   * and find if its ascendents should be checked.\n   * \n   * @param level  level of the node checked/unchecked\n   */\n  checkNode(node) {\n    let branch = this.findCurrentBranch(node.level);\n    let nextState = !branch.node.checked;\n    this.checkBranchDescendents(branch, nextState);\n    this.checkBranchAscendents(this.findParentBranch(branch.level), nextState);\n  }\n  \n  /**\n   * if a leaf is checked,\n   * we have to check all its ascendents\n   * to see if any should get checked to.\n   * \n   * @param leaf\n   */\n  checkLeaf(leaf) {\n    let leafBranch = this.findParentBranch(leaf.level);\n    let nextState = !leaf.checked;\n    leaf.checked = nextState;\n    this.checkBranchAscendents(leafBranch, nextState);\n  }\n\n   /**\n    * merge a branch to current tree\n    * @param branch\n    */\n  merge(\n    data = {},\n    node = {\n      level: '0',\n      path: ''\n    }\n  ) {\n    let { level, path, checked } = node;\n    let lvs = level.split('.').slice(1);\n    let branch = transform(data, this.conf, level, path);\n\n    branch.node.open = true;\n    branch.node.checked = checked;\n    branch.node.status = 'done';\n\n    if (lvs.length === 0) {\n      this.replace(branch);\n    } else {\n      let clone = deepClone(this.dataStore);\n      let top   = clone;\n      let pos   = lvs.pop();\n      let index = 0;\n\n      while (index = lvs.shift()) {\n        top = top.branches[index];\n      }\n      top.branches.splice(pos, 1, branch);\n      top.node.canOpen = true;\n\n      this.replace(clone);\n    }\n\n\n    this.checkBranchDescendents(branch, checked);\n  }\n\n  /**\n   * deal with actions\n   */\n  commit(action, elem, callback = noop) {\n    let isNode = elem.type === 'node';\n    \n    switch (action) {\n      case 'change':\n        this[isNode ? 'checkNode' : 'checkLeaf'](elem);\n        callback(this.getPathResult());\n        break;\n\n      case 'fold':\n        if (isNode) {\n          elem.open = !elem.open;\n          elem.canOpen || elem.status === 'done' || callback();\n        }\n        break;\n    }\n  }\n\n  /**\n   * get result as path\n   */\n  getPathResult(branch) {\n    branch = branch || this.dataStore;\n\n    let result = [];\n    let { node, branches, leafs, path } = branch;\n\n    if (node.checked) {\n      result.push(branch.path);\n    } else {\n      leafs.forEach(({ checked, path }) => {\n        if (checked) {\n          result.push(path);\n        }\n      });\n\n      branches.forEach(branch => {\n        arrPush.apply(result, this.getPathResult(branch))\n      });\n    }\n\n    return result;\n  }\n\n  raw() {\n    return transform.raw(this.dataStore, this.conf);\n  }\n};\n","<template>\n  <li class=\"v-node\" :key=\"data.level\">\n    <i\n      class=\"fa\"\n      :class=\"icon\"\n      @click=\"notify('unfold')\"\n    ></i>\n    <span @click=\"notify('change')\">\n      <i class=\"fa\" :class=\"[ data.checked ? 'fa-check-square-o' : 'fa-square-o' ]\"></i>\n      {{data.name}}\n    </span>\n  </li>\n</template>\n\n<script>\n  import EventMixin from './mixin';\n  export default {\n    name: 'v-node',\n    mixins: [EventMixin],\n    props: {\n      data: {\n        type: Object,\n        required: true\n      },\n      uid: {\n        type: [String, Number],\n        required: true\n      }\n    },\n    computed: {\n      icon() {\n        let data = this.data;\n        let folderLoding = data.status === 'loading';\n        let folderOpen = data.canOpen && data.open;\n        let isEmpty = !data.canOpen && data.status === 'done';\n        return {\n          'fa-spinner cursor-progress': folderLoding,\n          'fa-folder-open-o': !folderLoding && folderOpen,\n          'fa-folder-o': !folderLoding && !folderOpen,\n          'cursor-no-ops': isEmpty\n        };\n      }\n    }\n  };\n</script>\n","<template>\n  <li class=\"v-leaf\" @click=\"notify('change')\" :key=\"data.level\">\n    <i class=\"fa\" :class=\"[ data.checked ? 'fa-check-square-o' : 'fa-square-o' ]\"></i>\n    {{data.name}}\n  </li>\n</template>\n\n<script>\n  import EventMixin from './mixin';\n  export default {\n    name: 'v-leaf',\n    mixins: [EventMixin],\n    props: {\n      data: {\n        type: Object,\n        required: true\n      },\n      uid: {\n        type: [String, Number],\n        required: true\n      }\n    }\n  };\n</script>\n","<template>\n  <li :key=\"node.level\" class=\"v-branch\">\n    <ul class=\"v-branch-body\">\n      <v-node :data=\"node\" :uid=\"uid\"></v-node>\n      <v-branch v-show=\"node.open\" v-for=\"branch in branches\" :data=\"branch\" :uid=\"uid\"></v-branch>\n      <v-leaf v-show=\"node.open\" v-for=\"leaf in leafs\" :data=\"leaf\" :uid=\"uid\"></v-leaf>\n    </ul>\n  </li>\n</template>\n\n<script>\n  import EventMixin from './mixin';\n  import VLeaf from './v-leaf.vue';\n  import VNode from './v-node.vue';\n\n  export default {\n    name: 'v-branch',\n    mixins: [EventMixin],\n    props: {\n      data: {\n        type: Object,\n        required: true\n      },\n      uid: {\n        type: [String, Number],\n        required: true\n      }\n    },\n    components: {\n      'v-node': VNode,\n      'v-leaf': VLeaf\n    },\n    computed: {\n      branches() {\n        return this.data.branches;\n      },\n      leafs() {\n        return this.data.leafs;\n      },\n      node() {\n        return  this.data.node;\n      }\n    }\n  };\n</script>\n","<template lang=\"html\">\n  <ul class=\"v-branch-body\">\n    <v-node :data=\"node\" :uid=\"uid\"></v-node>\n    <v-branch v-show=\"node.open\" v-for=\"branch in branches\" :data=\"branch\" :uid=\"uid\"></v-branch>\n    <v-leaf v-show=\"node.open\" v-for=\"leaf in leafs\" :data=\"leaf\" :uid=\"uid\"></v-leaf>\n  </ul>\n</template>\n\n<script>\n  import EventMixin from './mixin';\n  import VNode from './v-node.vue';\n  import VLeaf from './v-leaf.vue';\n  import VBranch from './v-branch.vue';\n\n  export default {\n    name: 'v-tree',\n    mixins: [EventMixin],\n    props: {\n      store: {\n        type: Object,\n        required: true\n      },\n      uid: {\n        type: [String, Number],\n        required: true\n      }\n    },\n    components: {\n      'v-node': VNode,\n      'v-leaf': VLeaf,\n      'v-branch': VBranch\n    },\n    computed: {\n      root() {\n        return this.store.dataStore;\n      },\n      branches() {\n        return this.root.branches;\n      },\n      leafs() {\n        return this.root.leafs;\n      },\n      node() {\n        return this.root.node;\n      }\n    }\n  };\n</script>\n\n<style>\n  /*----------------------------------------------------------------\n                            .v-branch\n  ---------------------------------------------------------------*/\n  .v-branch-body {\n    padding: 0;\n    font-size: 18px;\n    color: #666;\n    list-style: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n  }\n  .v-branch-body .v-branch {\n    margin-left: 27px;\n  }\n  .v-branch ul {\n    margin: 0;\n    padding: 0;\n    list-style: none;\n  }\n\n  /*----------------------------------------------------------------\n                            .v-node\n  ---------------------------------------------------------------*/\n  .v-node {\n    padding: 0;\n    cursor: pointer;\n    list-style: none;\n  }\n  .v-node .fa {\n    width: 20px;\n    color: #0d83e6;\n    text-align: center;\n  }\n  .v-node .fa:hover {\n    color: #0c71c5;\n  }\n\n  /*----------------------------------------------------------------\n                            .v-leaf\n  ---------------------------------------------------------------*/\n  .v-leaf {\n    padding: 0;\n    margin: 0 0 0 27px;\n    cursor: pointer;\n  }\n  .v-leaf .fa {\n    display: inline-block;\n    width: 20px;\n    color: #0d83e6;\n    text-align: center;\n    font: normal normal normal 14px/1 FontAwesome;\n    font-size: inherit;\n    text-rendering: auto;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale\n  }\n  .v-leaf .fa:hover {\n    color: #0c71c5;\n  }\n\n  .cursor-no-ops {\n    cursor: not-allowed;\n  }\n  .cursor-progress {\n    cursor: progress;\n  }\n</style>\n\n\n","<template>\n  <v-tree :store=\"store\" :uid=\"uid\"></v-tree>\n</template>\n<script>\n  let KEY_MAP = {};\n  import EventMixin from './mixin';\n  import Store from './store';\n  import VTree from './v-tree.vue';\n\n  export default {\n    name: 'v-folder',\n    mixins: [EventMixin],\n    props: {\n      data: Object,\n      uid: {\n        type: [String, Number],\n        required: true\n      },\n      ajax: Object\n    },\n    components: {\n      'v-tree': VTree\n    },\n    data() {\n      return {\n        store: new Store(this.data, this.conf)\n      };\n    },\n    methods: {\n      request(node, done) {\n        if (!this.ajax) {\n          return done('ajax:false');\n        }\n  \n        let reqConf = this.ajax;\n        let { url, data, params, pathAs } = reqConf;\n        reqConf.params = (params || {});\n        reqConf.data   = (data || {});\n\n        reqConf.params[pathAs] = node.path;\n        reqConf.data[pathAs]   = node.path;\n  \n        this.$http.get(url, reqConf).then(r => {\n          let data = r.data;\n          data.dirs = data.dirs.map(d => ({name: d}));\n          done(null, data);\n        })\n        .catch(e => {\n          done(e);\n        });\n      }\n    },\n    created() {\n      let uid = this.uid;\n      if (uid in KEY_MAP) {\n        throw 'each <v-folder> instance must get an unique `uid` property';\n      } else {\n        KEY_MAP[uid] = null;\n      }\n\n      this.listen('change', node => {\n        this.store.commit('change', node, result => {\n          this.$emit('change', result);\n        });\n      });\n\n      this.listen('unfold', node => {\n        this.store.commit('fold', node, () => {\n          node.status = 'loading';\n          this.request(node, (err, data) => {\n            if (err) {\n              node.status = 'empty';\n            } else {\n              this.store.merge(data, node);\n            }\n          });\n        });\n      });\n    }\n  };\n</script>\n","/* global define */\n(function (root, factory) {\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define([], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        root.compareVersions = factory();\n    }\n}(this, function () {\n\n    var semver = /^v?(?:0|[1-9]\\d*)(\\.(?:[x*]|0|[1-9]\\d*)(\\.(?:[x*]|0|[1-9]\\d*)(?:-[\\da-z\\-]+(?:\\.[\\da-z\\-]+)*)?(?:\\+[\\da-z\\-]+(?:\\.[\\da-z\\-]+)*)?)?)?$/i;\n    var patch = /-([0-9A-Za-z-.]+)/;\n\n    function split(v) {\n        var temp = v.split('.');\n        var arr = temp.splice(0, 2);\n        arr.push(temp.join('.'));\n        return arr;\n    }\n\n    function tryParse(v) {\n        return isNaN(Number(v)) ? v : Number(v);\n    }\n\n    function validate(version) {\n        if (typeof version !== 'string') {\n            throw new TypeError('Invalid argument expected string');\n        }\n        if (!semver.test(version)) {\n            throw new Error('Invalid argument not valid semver');\n        }\n    }\n\n    return function compareVersions(v1, v2) {\n        [v1, v2].forEach(validate);\n\n        var s1 = split(v1);\n        var s2 = split(v2);\n\n        for (var i = 0; i < 3; i++) {\n            var n1 = parseInt(s1[i] || 0, 10);\n            var n2 = parseInt(s2[i] || 0, 10);\n\n            if (n1 > n2) return 1;\n            if (n2 > n1) return -1;\n        }\n\n        if ([s1[2], s2[2]].every(patch.test.bind(patch))) {\n            var p1 = patch.exec(s1[2])[1].split('.').map(tryParse);\n            var p2 = patch.exec(s2[2])[1].split('.').map(tryParse);\n\n            for (i = 0; i < Math.max(p1.length, p2.length); i++) {\n                if (p1[i] === undefined || typeof p2[i] === 'string' && typeof p1[i] === 'number') return -1;\n                if (p2[i] === undefined || typeof p1[i] === 'string' && typeof p2[i] === 'number') return 1;\n\n                if (p1[i] > p2[i]) return 1;\n                if (p2[i] > p1[i]) return -1;\n            }\n        } else if ([s1[2], s2[2]].some(patch.test.bind(patch))) {\n            return patch.test(s1[2]) ? -1 : 1;\n        }\n\n        return 0;\n    };\n\n}));\n","import compareVersion from 'compare-versions';\n\nexport const checkVersion = function () {\n  let compare = function (v1, v2) {\n    return compareVersion(v1, v2) >= 0;\n  };\n\n  // if must compile template\n  if (process.env.MODE === 'compile') {\n    // `compileTemplate: true` will error\n    // before version 2.1.5\n    if (!compare(Vue.version, '2.1.5')) {\n      throw 'Vue before verison 2.1.5 will cause error.\\n Pleasw consider updating vue, or just require `bundle.common.js` instead of `bundle.compile.js`';\n    }\n  }\n\n  // warn that will not support vue@1\n  if (!compare(Vue.version, '2.0.0')) {\n    throw 'This module can only supports vue@2!';\n  }\n};\n\nexport const eventMix = function () {\n  let hub = new Vue();\n  let proto = Vue.prototype;\n\n  proto.___von = function (type, cb) {\n    let uid = this.uid;\n    let vm = this;\n    let fn = function(e) {\n      if (uid === e.uid && cb) {\n        cb(e.data);\n      }\n    };\n    hub.$on(`#${uid}@${type}`, fn);\n  };\n\n  proto.___vemit = function (type, data) {\n    let uid = this.uid;\n    hub.$emit(`#${uid}@${type}`, { data, uid });\n  };\n\n  proto.___voff = function (type, fn) {\n    let uid = this.uid;\n\n    if (type) {\n      hub.$off(`#${uid}@${type}`, fn);\n    } else {\n      uid = `#${uid}@`\n      let len = uid.length;\n      let types = Object.keys(hub._events);\n      let match = types.filter(k => k.indexOf(uid) === 0);\n      match.forEach(k => {\n        hub.$off(k, fn);\n      })\n    }\n  };\n};\n","import VFolderComp from './index.vue';\nimport { checkVersion, eventMix } from './install';\n\nVFolderComp.install = Vue => {\n  checkVersion(Vue)\n  eventMix(Vue);\n  Vue.component(VFolderComp.name, VFolderComp);\n};\n\nexport default VFolderComp;\n"],"names":["toObject","val","undefined","TypeError","Object","shouldUseNative","assign","test1","String","getOwnPropertyNames","test2","i","fromCharCode","order2","map","n","join","test3","split","forEach","letter","keys","err","transform","data","config","level","path","node","branch","leaf","checked","open","name","branches","leafs","canOpen","length","type","let","status","methods","notify","console","info","this","___vemit","listen","fn","___von","e","destroyed","___voff","getOwnPropertySymbols","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","target","source","from","symbols","to","s","arguments","key","call","clone","parent","circular","depth","includeNonEnumerable","_clone","child","proto","nativeMap","nativeSet","nativePromise","resolve","reject","then","value","__isArray","__isRegExp","RegExp","__getRegExpFlags","lastIndex","__isDate","Date","getTime","useBuffer","Buffer","isBuffer","copy","Error","create","getPrototypeOf","index","allParents","indexOf","allChildren","push","keyIterator","next","done","keyChild","valueChild","get","set","iterator","entryChild","add","attrs","getOwnPropertyDescriptor","symbol","descriptor","enumerable","defineProperty","allPropertyNames","propertyName","Infinity","__objToStr","o","toString","re","flags","global","ignoreCase","multiline","Map","_","Set","Promise","clonePrototype","c","module","exports","arrPush","noop","defaultConf","Store","conf","filter","slice","objectAssign","dataStore","replace","newTree","findParentBranch","levelId","lvs","shift","findCurrentBranch","checkBranchAscendents","nextStatus","allBranchesChecked","some","b","allLeavesChecked","l","checkBranchDescendents","this$1","checkNode","nextState","checkLeaf","leafBranch","merge","deepClone","top","pos","pop","splice","commit","action","elem","callback","isNode","getPathResult","result","ref","apply","raw","mixins","EventMixin","props","required","uid","Number","computed","icon","folderLoding","folderOpen","isEmpty","fa-spinner cursor-progress","fa-folder-open-o","fa-folder-o","cursor-no-ops","components","v-node","VNode","v-leaf","VLeaf","store","v-branch","VBranch","root","KEY_MAP","ajax","v-tree","VTree","request","reqConf","url","params","pathAs","$http","r","dirs","d","catch","created","$emit","factory","v","temp","arr","tryParse","isNaN","validate","version","semver","test","patch","v1","v2","s1","s2","n1","parseInt","n2","every","bind","p1","exec","p2","Math","max","checkVersion","compare","compareVersion","Vue","eventMix","hub","cb","$on","$off","types","_events","match","k","VFolderComp","install","component"],"mappings":"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"}