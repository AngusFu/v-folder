!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.VFolder=t()}(this,function(){"use strict";function e(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function t(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}function r(e,t,n,o){void 0===e&&(e={});var a=t.node,i=t.branch,c=t.leaf,s=t.checked,u=t.open,f=e[a]||"/",d=e[i]||[],l=e[c]||[],h=d.length>0||l.length>0;o=o||"/"+f,d=d.map(function(e,a){return r(e,t,n+"."+a,o+"/"+e.name)}),l=l.map(function(e,t){return{name:e,type:"leaf",checked:s,level:n+"."+t,path:o+"/"+e}});var p=h?"filled":"empty";return{name:f,type:"branch",level:n,path:o,node:{name:f,open:u,canOpen:h,checked:s,level:n,path:o,type:"node",status:p},branches:d,leafs:l}}var o={methods:{notify:function(e){this.___vemit(e,this.data)},listen:function(e,t){this.___von(e,function(e){t(e)})}},destroyed:function(){this.___voff()}},a=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,s=t()?Object.assign:function(t,n){for(var r,o,s=arguments,u=e(t),f=1;f<arguments.length;f++){r=Object(s[f]);for(var d in r)i.call(r,d)&&(u[d]=r[d]);if(a){o=a(r);for(var l=0;l<o.length;l++)c.call(r,o[l])&&(u[o[l]]=r[o[l]])}}return u},u="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},f=n(function(e){var t=function(){function e(t,n,r,o,u){function f(t,r){if(null===t)return null;if(0===r)return t;var p,v;if("object"!=typeof t)return t;if(t instanceof i)p=new i;else if(t instanceof c)p=new c;else if(t instanceof s)p=new s(function(e,n){t.then(function(t){e(f(t,r-1))},function(e){n(f(e,r-1))})});else if(e.__isArray(t))p=[];else if(e.__isRegExp(t))p=new RegExp(t.source,a(t)),t.lastIndex&&(p.lastIndex=t.lastIndex);else if(e.__isDate(t))p=new Date(t.getTime());else{if(h&&Buffer.isBuffer(t))return p=new Buffer(t.length),t.copy(p),p;t instanceof Error?p=Object.create(t):"undefined"==typeof o?(v=Object.getPrototypeOf(t),p=Object.create(v)):(p=Object.create(o),v=o)}if(n){var m=d.indexOf(t);if(m!=-1)return l[m];d.push(t),l.push(p)}if(t instanceof i)for(var b=t.keys();;){var y=b.next();if(y.done)break;var g=f(y.value,r-1),j=f(t.get(y.value),r-1);p.set(g,j)}if(t instanceof c)for(var _=t.keys();;){var y=_.next();if(y.done)break;var w=f(y.value,r-1);p.add(w)}for(var O in t){var k;v&&(k=Object.getOwnPropertyDescriptor(v,O)),k&&null==k.set||(p[O]=f(t[O],r-1))}if(Object.getOwnPropertySymbols)for(var x=Object.getOwnPropertySymbols(t),O=0;O<x.length;O++){var E=x[O],P=Object.getOwnPropertyDescriptor(t,E);(!P||P.enumerable||u)&&(p[E]=f(t[E],r-1),P.enumerable||Object.defineProperty(p,E,{enumerable:!1}))}if(u)for(var S=Object.getOwnPropertyNames(t),O=0;O<S.length;O++){var q=S[O],P=Object.getOwnPropertyDescriptor(t,q);P&&P.enumerable||(p[q]=f(t[q],r-1),Object.defineProperty(p,q,{enumerable:!1}))}return p}"object"==typeof n&&(r=n.depth,o=n.prototype,u=n.includeNonEnumerable,n=n.circular);var d=[],l=[],h="undefined"!=typeof Buffer;return"undefined"==typeof n&&(n=!0),"undefined"==typeof r&&(r=1/0),f(t,r)}function t(e){return Object.prototype.toString.call(e)}function n(e){return"object"==typeof e&&"[object Date]"===t(e)}function r(e){return"object"==typeof e&&"[object Array]"===t(e)}function o(e){return"object"==typeof e&&"[object RegExp]"===t(e)}function a(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}var i;try{i=Map}catch(e){i=function(){}}var c;try{c=Set}catch(e){c=function(){}}var s;try{s=Promise}catch(e){s=function(){}}return e.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},e.__objToStr=t,e.__isDate=n,e.__isArray=r,e.__isRegExp=o,e.__getRegExpFlags=a,e}();e.exports&&(e.exports=t)}),d=[].push,l=function(e){return e},h={node:"name",branch:"dirs",leaf:"files",open:!1,checked:!1},p=function(e,t){var n=e.path||e.name,o=n.split("/").filter(function(e){return!!e}).slice(-1)[0]||e.name;e.name=o,this.conf=s({},t,h),this.dataStore=r(e,this.conf,"0",n)};p.prototype.replace=function(e){this.dataStore=e},p.prototype.findParentBranch=function(e){void 0===e&&(e="");var t=e.length,n=this.dataStore;if(t<=1)return null;for(var r=e.split(".").slice(1,-1),o=0;n&&(o=r.shift());)n=n.branches[o];return n},p.prototype.findCurrentBranch=function(e){void 0===e&&(e="");for(var t=e.split(".").slice(1),n=0,r=this.dataStore;r&&(n=t.shift());)r=r.branches[n];return r},p.prototype.checkBranchAscendents=function(e,t){var n=!1;if(e){if(t){var r=!e.branches.some(function(e){return!e.node.checked}),o=!e.leafs.some(function(e){return!e.checked});n=r&&o}e.node.checked=n,this.checkBranchAscendents(this.findParentBranch(e.level),n)}},p.prototype.checkBranchDescendents=function(e,t){var n=this;e.node.checked=t,e.leafs.forEach(function(e){return e.checked=t}),e.branches.forEach(function(e){e.node.checked=t,n.checkBranchDescendents(e,t)})},p.prototype.checkNode=function(e){var t=this.findCurrentBranch(e.level),n=!t.node.checked;this.checkBranchDescendents(t,n),this.checkBranchAscendents(this.findParentBranch(t.level),n)},p.prototype.checkLeaf=function(e){var t=this.findParentBranch(e.level),n=!e.checked;e.checked=n,this.checkBranchAscendents(t,n)},p.prototype.merge=function(e,t){void 0===e&&(e={}),void 0===t&&(t={level:"0",path:""});var n=t.level,o=t.path,a=t.checked,i=n.split(".").slice(1),c=r(e,this.conf,n,o);if(c.node.open=!0,c.node.checked=a,c.node.status="done",0===i.length)this.replace(c);else{for(var s=f(this.dataStore),u=s,d=i.pop(),l=0;l=i.shift();)u=u.branches[l];u.branches.splice(d,1,c),u.node.canOpen=!0,this.replace(s)}this.checkBranchDescendents(c,a)},p.prototype.commit=function(e,t,n){void 0===n&&(n=l);var r="node"===t.type;switch(e){case"change":this[r?"checkNode":"checkLeaf"](t),n(this.getPathResult());break;case"fold":r&&(t.open=!t.open,t.canOpen||"done"===t.status||n())}},p.prototype.getPathResult=function(e){var t=this;e=e||this.dataStore;var n=[],r=e.node,o=e.branches,a=e.leafs;e.path;return r.checked?n.push(e.path):(a.forEach(function(e){var t=e.checked,r=e.path;t&&n.push(r)}),o.forEach(function(e){d.apply(n,t.getPathResult(e))})),n},p.prototype.raw=function(){return r.raw(this.dataStore,this.conf)};var v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{key:e.data.level,staticClass:"v-node"},[n("i",{staticClass:"fa",class:e.icon,on:{click:function(t){e.notify("unfold")}}}),e._v(" "),n("span",{on:{click:function(t){e.notify("change")}}},[n("i",{staticClass:"fa",class:[e.data.checked?"fa-check-square-o":"fa-square-o"]}),e._v(" "+e._s(e.data.name))])])},staticRenderFns:[],name:"v-node",mixins:[o],props:{data:{type:Object,required:!0},uid:{type:[String,Number],required:!0}},computed:{icon:function(){var e=this.data,t="loading"===e.status,n=e.canOpen&&e.open,r=!e.canOpen&&"done"===e.status;return{"fa-spinner cursor-progress":t,"fa-folder-open-o":!t&&n,"fa-folder-o":!t&&!n,"cursor-no-ops":r}}}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{key:e.data.level,staticClass:"v-leaf",on:{click:function(t){e.notify("change")}}},[n("i",{staticClass:"fa",class:[e.data.checked?"fa-check-square-o":"fa-square-o"]}),e._v(" "+e._s(e.data.name))])},staticRenderFns:[],name:"v-leaf",mixins:[o],props:{data:{type:Object,required:!0},uid:{type:[String,Number],required:!0}}},b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{key:e.node.level,staticClass:"v-branch"},[n("ul",{staticClass:"v-branch-body"},[n("v-node",{attrs:{data:e.node,uid:e.uid}}),e._l(e.branches,function(t){return n("v-branch",{directives:[{name:"show",rawName:"v-show",value:e.node.open,expression:"node.open"}],attrs:{data:t,uid:e.uid}})}),e._l(e.leafs,function(t){return n("v-leaf",{directives:[{name:"show",rawName:"v-show",value:e.node.open,expression:"node.open"}],attrs:{data:t,uid:e.uid}})})],2)])},staticRenderFns:[],name:"v-branch",mixins:[o],props:{data:{type:Object,required:!0},uid:{type:[String,Number],required:!0}},components:{"v-node":v,"v-leaf":m},computed:{branches:function(){return this.data.branches},leafs:function(){return this.data.leafs},node:function(){return this.data.node}}},y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"v-branch-body"},[n("v-node",{attrs:{data:e.node,uid:e.uid}}),e._l(e.branches,function(t){return n("v-branch",{directives:[{name:"show",rawName:"v-show",value:e.node.open,expression:"node.open"}],attrs:{data:t,uid:e.uid}})}),e._l(e.leafs,function(t){return n("v-leaf",{directives:[{name:"show",rawName:"v-show",value:e.node.open,expression:"node.open"}],attrs:{data:t,uid:e.uid}})})],2)},staticRenderFns:[],name:"v-tree",mixins:[o],props:{store:{type:Object,required:!0},uid:{type:[String,Number],required:!0}},components:{"v-node":v,"v-leaf":m,"v-branch":b},computed:{root:function(){return this.store.dataStore},branches:function(){return this.root.branches},leafs:function(){return this.root.leafs},node:function(){return this.root.node}}},g={},j={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tree",{attrs:{store:e.store,uid:e.uid}})},staticRenderFns:[],name:"v-folder",mixins:[o],props:{data:Object,uid:{type:[String,Number],required:!0},ajax:Object,conf:Object},components:{"v-tree":y},data:function(){return{store:new p(this.data,this.conf)}},methods:{request:function(e,t){if(!this.ajax)return t("ajax:false");var n=this.conf||{},r=n.branch||"dirs",o=(n.leaf||"files",n.node||"name"),a=this.ajax,i=(a.url,a.method),c=a.data,s=a.params,u=a.pathAs,f="GET"===i.toUpperCase();f?(a.params=s||{},a.params[u]=e.path):(a.data=c||{},a.data[u]=e.path),this.$http(a).then(function(e){var n=e.data;n[r]=n[r].map(function(e){return t={},t[o]=e,t;var t}),t(null,n)}).catch(function(e){t(e)})}},created:function(){var e=this,t=this.uid;if(t in g)throw"each <v-folder> instance must get an unique `uid` property";g[t]=null,this.listen("change",function(t){e.store.commit("change",t,function(t){e.$emit("change",t)})}),this.listen("unfold",function(t){e.store.commit("fold",t,function(){t.status="loading",e.request(t,function(n,r){n?t.status="empty":e.store.merge(r,t)})})})}},_=n(function(e,t){!function(t,n){e.exports=n()}(u,function(){function e(e){var t=e.split("."),n=t.splice(0,2);return n.push(t.join(".")),n}function t(e){return isNaN(Number(e))?e:Number(e)}function n(e){if("string"!=typeof e)throw new TypeError("Invalid argument expected string");if(!r.test(e))throw new Error("Invalid argument not valid semver")}var r=/^v?(?:0|[1-9]\d*)(\.(?:[x*]|0|[1-9]\d*)(\.(?:[x*]|0|[1-9]\d*)(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,o=/-([0-9A-Za-z-.]+)/;return function(r,a){[r,a].forEach(n);for(var i=e(r),c=e(a),s=0;s<3;s++){var u=parseInt(i[s]||0,10),f=parseInt(c[s]||0,10);if(u>f)return 1;if(f>u)return-1}if([i[2],c[2]].every(o.test.bind(o))){var d=o.exec(i[2])[1].split(".").map(t),l=o.exec(c[2])[1].split(".").map(t);for(s=0;s<Math.max(d.length,l.length);s++){if(void 0===d[s]||"string"==typeof l[s]&&"number"==typeof d[s])return-1;if(void 0===l[s]||"string"==typeof d[s]&&"number"==typeof l[s])return 1;if(d[s]>l[s])return 1;if(l[s]>d[s])return-1}}else if([i[2],c[2]].some(o.test.bind(o)))return o.test(i[2])?-1:1;return 0}})}),w=function(){var e=function(e,t){return _(e,t)>=0};if(!e(Vue.version,"2.1.5"))throw"Vue before verison 2.1.5 will cause error.\n Pleasw consider updating vue, or just require `bundle.common.js` instead of `bundle.compile.js`";if(!e(Vue.version,"2.0.0"))throw"This module can only supports vue@2!"},O=function(){var e=new Vue,t=Vue.prototype;t.___von=function(t,n){var r=this.uid,o=function(e){r===e.uid&&n&&n(e.data)};e.$on("#"+r+"@"+t,o)},t.___vemit=function(t,n){var r=this.uid;e.$emit("#"+r+"@"+t,{data:n,uid:r})},t.___voff=function(t,n){var r=this.uid;if(t)e.$off("#"+r+"@"+t,n);else{r="#"+r+"@";var o=(r.length,Object.keys(e._events)),a=o.filter(function(e){return 0===e.indexOf(r)});a.forEach(function(t){e.$off(t,n)})}}};return j.install=function(e){w(e),O(e),e.component(j.name,j)},j});
//# sourceMappingURL=bundle.compile.js.map
