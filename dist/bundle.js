!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.vTreeSelect=n()}(this,function(){"use strict";var e=function(t,a,c,o){void 0===t&&(t={}),void 0===a&&(a={}),void 0===c&&(c="0"),void 0===o&&(o="");var r=Object.assign({},a,n),d=r.node,i=r.branch,s=r.leaf,h=r.checked,f=r.open,l=t[d]||"",u=t[i]||[],p=t[s]||[],v=u.length>0||p.length>0;return u=u.map(function(n,t){return e(n,r,c+"."+t,o+"/"+n.name)}),p=p.map(function(e,n){return{checked:h,name:e,level:c+"."+n,path:o+"/"+e}}),{name:l,level:c,path:o,node:{name:l,open:f,canOpen:v,checked:h,level:c},branches:u,leafs:p}},n={node:"name",branch:"dirs",leaf:"files",open:!1,checked:!1},t={transform:e,defaultConf:n},a=t.transform,c=t.defaultConf,o=[].push,r={dataStore:a({}),setStore:function(e,n){return void 0===n&&(n=c),this.dataStore=a(e,n)},findParentBranch:function(e){void 0===e&&(e="");var n=e.length,t=this.dataStore;if(n<=1)return null;for(var a=e.split(".").slice(1,-1),c=0;t&&(c=a.shift());)t=t.branches[c];return t},findCurrentBranch:function(e){void 0===e&&(e="");for(var n=e.split(".").slice(1),t=0,a=this.dataStore;a&&(t=n.shift());)a=a.branches[t];return a},replaceBranch:function(e,n,t){void 0===n&&(n="0"),void 0===t&&(t=c);for(var o=n.split(".").slice(1),r=0,d=Object.assign({},this.dataStore),i=d,s=o.pop();i&&(r=o.shift());)i=i.branches[r];return i.branches[s]=a(e,t,n),this.dataStore=d},getBranchResult:function(e){var n=this,t=[],a=e.node,c=e.branches,r=e.leafs;e.path;return a.checked?t.push(e.path):(r.forEach(function(e){var n=e.checked,a=e.path;n&&t.push(a)}),c.forEach(function(e){o.apply(t,n.getBranchResult(e))})),t},getResult:function(){return this.getBranchResult(this.dataStore)}},d={created:function(){var e=this;this.__EVENT_BUS.$on("descendents_force_checked",function(n,t){var a=e.data.level;0===a.indexOf(n)&&a.slice(n.length).length>0&&(e.data.checked=t)})}},i={template:'<li class="v-node"><i class="fa" :class="[ data.canOpen && data.open ? \'fa-folder-open-o\' : \'fa-folder-o\' ]" @click="toggleExpanded"></i> <span @click="toggleChecked"><i class="fa" :class="[ data.checked ? \'fa-check-square-o\' : \'fa-square-o\' ]"></i> {{data.name}}</span></li>',props:{data:Object},mixins:[d],methods:{toggleChecked:function(){this.__EVENT_BUS.$emit("node_toggle_checked",this.data)},toggleExpanded:function(){this.__EVENT_BUS.$emit("node_toggle_expanded",this.data)}},created:function(){}},s={template:'<li class="v-leaf" @click="toggleChecked"><i class="fa" :class="[ data.checked ? \'fa-check-square-o\' : \'fa-square-o\' ]"></i> {{data.name}}</li>',props:{data:Object},mixins:[d],methods:{toggleChecked:function(){this.__EVENT_BUS.$emit("leaf_toggle_checked",this.data)}},created:function(){}},h={template:'<ul class="branch"><v-node :data="node"></v-node><v-branch v-show="node.open" v-for="branch in branches" :data="branch"></v-branch><v-leaf v-show="node.open" v-for="leaf in leafs" :data="leaf"></ul>',name:"v-branch",props:{data:Object},components:{"v-node":i,"v-leaf":s},computed:{branches:function(){return this.data.branches},leafs:function(){return this.data.leafs},node:function(){return this.data.node}}},f={template:'<ul class="branch"><v-node :data="node"></v-node><v-branch v-show="node.open" v-for="branch in branches" :data="branch"></v-branch><v-leaf v-show="node.open" v-for="leaf in leafs" :data="leaf"></v-leaf></ul>',name:"v-tree-select",props:{data:Object,conf:Object},components:{"v-node":i,"v-leaf":s,"v-branch":h},data:function(){return{root:r.setStore(this.data,this.conf)}},computed:{branches:function(){return this.root.branches},leafs:function(){return this.root.leafs},node:function(){return this.root.node}},created:function(){var e=this,n=function(e,t){var a=r.findParentBranch(e),c=!1;if(a){if(t){var o=!a.branches.some(function(e){return!e.node.checked}),d=!a.leafs.some(function(e){return!e.checked});c=o&&d}a.node.checked=c,n(a.level,c)}};this.__EVENT_BUS.$on("node_toggle_expanded",function(e){e.open=!e.open}),this.__EVENT_BUS.$on("node_toggle_checked",function(t){var a=r.findCurrentBranch(t.level),c=a.level,o=!a.node.checked;a.node.checked=o,a.branches.forEach(function(e){return e.node.checked=o}),a.leafs.forEach(function(e){return e.checked=o}),n(c,o),e.__EVENT_BUS.$emit("descendents_force_checked",a.level,o),e.$nextTick(function(){e.$emit("change",r.getResult())})}),this.__EVENT_BUS.$on("leaf_toggle_checked",function(t){var a=!t.checked;t.checked=a,n(t.level,a),e.$nextTick(function(){e.$emit("change",r.getResult())})})}};return f.install=function(e){e.prototype.__EVENT_BUS=new e,e.use(h),e.component(f.name,f)},h.install=function(e){e.component(h.name,h)},f});
//# sourceMappingURL=bundle.js.map
